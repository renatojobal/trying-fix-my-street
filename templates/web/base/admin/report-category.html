[%~ IF NOT select_name %]
    [%~ select_name = 'category' %]
[%~ END %]
<select class="form-control" name="[% select_name %]" id="[% select_name %]">
  [% IF NOT problem.category OR NOT categories_hash.${problem.category} %]
    <optgroup label="[% loc('Existing category') %]">
        <option selected value="[% problem.category | html %]">[% (problem.category_display OR '-') | html %]</option>
    </optgroup>
  [% END %]
  [% IF category_options.size %]
    <optgroup label="[% loc('Available categories') %]">
      [% FOREACH cat IN category_options %]
        <option value="[% cat.category | html %]"[% ' selected' IF problem.category == cat.category %]>[% cat.category_display | html %]</option>
      [% END %]
    </optgroup>
  [% END %]
</select>
